<div class="auth-shell">
  <div class="auth-card">

    <!-- Brand / Header -->
    <div class="brand">
      <div class="logo-dot"></div>
      <h1>Admin Portal</h1>
      <p class="subtitle">Manage products & orders securely</p>
    </div>

    <!-- Mode Tabs -->
    <div class="tabs" role="tablist" aria-label="Auth mode" *ngIf="!isLoggedIn">
      <button
        class="tab"
        [class.active]="logIn"
        (click)="changeMode(true)"
        role="tab"
        [attr.aria-selected]="logIn"
        >
        Login
        </button>
      <button
        class="tab"
        [class.active]="!logIn"
        (click)="changeMode(false)"
        role="tab"
        [attr.aria-selected]="!logIn"
        [disabled]="true"
        >
        Sign Up
        </button>
    </div>

    <!-- Login Form -->
    <form
      *ngIf="!isLoggedIn && logIn"
      class="form"
      (ngSubmit)="login()"
      autocomplete="on"
    >
      <h2 class="form-title">Welcome back</h2>

      <label class="field">
        <span>Email</span>
        <input
          type="email"
          placeholder="you@company.com"
          [(ngModel)]="email"
          name="loginEmail"
          required
        />
      </label>

      <label class="field password-field">
        <span>Password</span>
        <input
          [type]="showPassword ? 'text' : 'password'"
          placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
          [(ngModel)]="password"
          name="loginPassword"
          required
        />
        <button
          type="button"
          class="icon-btn"
          (click)="showPassword = !showPassword"
          [attr.aria-pressed]="showPassword"
          aria-label="Toggle password visibility"
        >
          {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
        </button>
      </label>

      <button
        class="primary-btn"
        type="submit"
        [disabled]="!email || !password || isLoading"
        (click)="login()"
      >
        <span *ngIf="!isLoading">Login</span>
        <span *ngIf="isLoading" class="spinner"></span>
      </button>

      <button class="link-btn" routerLink="/" type="button">
        â† Back to site
      </button>
    </form>

    <!-- Sign Up Form -->
    <form
      *ngIf="!isLoggedIn && !logIn"
      class="form"
      (ngSubmit)="signUp()"
      autocomplete="on"
    >
      <h2 class="form-title">Create admin account</h2>

      <label class="field">
        <span>Username</span>
        <input
          type="text"
          placeholder="e.g. admin_daniel"
          [(ngModel)]="username"
          name="signupUsername"
          required
        />
      </label>

      <label class="field">
        <span>Email</span>
        <input
          type="email"
          placeholder="you@company.com"
          [(ngModel)]="email"
          name="signupEmail"
          required
        />
      </label>

      <label class="field password-field">
        <span>Password</span>
        <input
          [type]="showPassword ? 'text' : 'password'"
          placeholder="Minimum 8 characters"
          [(ngModel)]="password"
          name="signupPassword"
          required
        />
        <button
          type="button"
          class="icon-btn"
          (click)="showPassword = !showPassword"
          [attr.aria-pressed]="showPassword"
          aria-label="Toggle password visibility"
        >
          {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
        </button>
      </label>

      <button
        class="primary-btn"
        type="submit"
        [disabled]="!username || !email || !password || isLoading"
        (click)="signUp()"
      >
        <span *ngIf="!isLoading">Sign Up</span>
        <span *ngIf="isLoading" class="spinner"></span>
      </button>

      <button class="link-btn" routerLink="/" type="button">
        â† Back to site
      </button>
    </form>

    <!-- Logged In State -->
    <div *ngIf="isLoggedIn" class="logged-in">
      <h2>Welcome, {{ adminNickName }} ğŸ‘‹</h2>
      <p class="hint">Choose a section to manage</p>

      <div class="actions">
        <button class="primary-btn" routerLink="/manage-inventory">Manage Inventory</button>
        <button class="primary-btn" routerLink="/manage-services">Manage Services</button>
        <button class="primary-btn" routerLink="/orders">Manage Orders</button>
        <button class="primary-btn" routerLink="/reports">View Reports</button>
        <button class="secondary-btn" (click)="logout()">Logout</button>
        <button class="link-btn" routerLink="/">â† Back to site</button>
      </div>
    </div>

    <!-- Optional error/success toast area -->
    <div *ngIf="message" class="toast" [class.error]="messageType === 'error'">
      {{ message }}
    </div>
  </div>
</div>
