<app-header></app-header>

<div class="checkout-page">
  <div class="checkout-container">
    <form [formGroup]="checkoutForm">

      <!-- (your existing checkout form HTML above stays the same) -->

      <!-- PAYPAL BUTTON -->
      <div id="paypal-button-container" *ngIf="checkoutForm.get('method')?.value === 'PAYPAL'"></div>

      <!-- SUBMIT BUTTON -->
      <button class="submit-btn" (click)="payNow()">
        {{ isProcessing ? 'Processing…' : 'Submit & Pay' }}
      </button>

    </form>

    <div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
  </div>

  <!-- E-TRANSFER POPUP -->
  <div class="etransfer-overlay" *ngIf="pendingInfo">
    <div class="etransfer-modal">
      <h2>✓ E-Transfer Order Created</h2>

      <p>Please send your payment within <strong>48 hours</strong>.</p>

      <div class="modal-section">
        <p><strong>Amount Due:</strong> ${{ pendingInfo.amount }}</p>
        <p><strong>Reference:</strong> {{ pendingInfo.reference }}</p>
      </div>

      <p class="muted">
        Send your e-transfer to <strong>info&#64;davendpunch.ca</strong>
        and include the reference in the memo. You have been emailed instructions as well.
      </p>

      <!-- FREE FALLBACK: mailto + copy -->
      <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top: 10px;">
        <a class="btn btn-primary" [href]="pendingMailtoUrl" *ngIf="pendingMailtoUrl">
          Email order summary to us
        </a>

        <button class="btn btn-primary" type="button" (click)="copyPendingSummary()" *ngIf="pendingSummaryText">
          {{ pendingCopied ? 'Copied!' : 'Copy order summary' }}
        </button>

        <button class="btn btn-primary" (click)="closePendingModal()">
          Done
        </button>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
